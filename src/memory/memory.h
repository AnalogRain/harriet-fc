#ifndef MEMORY_H
#define MEMORY_H

#include <inttypes.h>
#include <string.h>

#define BANK_OFFSET 0x8000
#define INT_OFFSET 0x8000

uint8_t bank;

uint8_t rom[0xF00] = {
	0xdb, 0x02, 0x00,
};

uint8_t global_memory[0xFFFF];

uint8_t preload_program[0x7DFF] = { // temp
	// 0x14, 0xff, 0x00, 0xdb, 0x02, 0x00,
	0x0e, 0x03, 0x7f, 0xff, 0x0e, 0x00, 0x80, 0x02, 0x0e, 0x02, 0x80, 0x03, 0x0e, 0x00, 0x80, 0x04, 0x0e, 0x03, 0x80, 0x03, 0x0e, 0x80, 0x80, 0x04, 0x0e, 0x01, 0x80, 0x03, 0x0e, 0x64, 0x80, 0x04, 0x0e, 0x04, 0x80, 0x03, 0x0e, 0x31, 0x80, 0x04, 0x0e, 0x03, 0x7f, 0xff, 0x0e, 0x07, 0x80, 0x03, 0x0e, 0x01, 0x7f, 0xff, 0x1f, 0x80, 0x0a, 0xca, 0x01, 0xd4, 0x02, 0x3f, 0xda, 0x02, 0x4a, 0x0e, 0x03, 0x7f, 0xff, 0x0e, 0x40, 0x80, 0x04, 0xdb, 0x02, 0x30, 0x0e, 0x03, 0x7f, 0xff, 0x0e, 0x00, 0x80, 0x04, 0xdb, 0x02, 0x30
};

// 0x7FFE number of device banks + 1
// 0x7FFF current bank number

uint8_t preload_ihandler[0xFE] = {
	0xa2, 0xa3, 0xa4, 0xa5, 0xa6, 0x1f, 0x1f, 0xfe, 0x09, 0x1f, 0xff, 0x20, 0x20, 0x00, 0xcb, 0x00, 0xd4, 0x02, 0x1a, 0xdd, 0xff, 0x00, 0x0e, 0x00, 0x20, 0x00, 0x95, 0xca, 0x01, 0xda, 0x02, 0x08, 0xac, 0xab, 0xaa, 0xa9, 0xa8,
	// 0xe0
};

uint8_t keyboard_handler[0x100] = {

};

uint8_t clock_handler[0x100] = {

};

uint8_t audio_handler[0x100] = {

};

uint8_t video_handler[0x100] = {

};

uint8_t floppy1_handler[0x100] = {

};

uint8_t floppy2_handler[0x100] = {

};

void do_controller_cycle();

#endif
